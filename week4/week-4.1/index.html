<!-- <html>
    <style>
        .container {
            background-color: red;
            font-size: 100;
            padding: 20;
            margin: 100;
            color: green;
        }
    </style>
    <body>
        <div class="container">hi there</div> <br></br>
        <div class="container">hi there 2</div> <br></br>
    </body>
</html> -->

<html>
    <script>
        function populateDiv() {
            const a = document.getElementById("firstNumber").value;
            const b = document.getElementById("secondNumber").value;

            const element = document.getElementById("finalSum");
            
            //element.innerHTML = parseInt(a) + parseInt(b);

            // fetch            
            fetch("http://localhost:8080/sum?a=" + a + "&b=" + b)
                .then(function(response) {
                    return response.text();   // return response as text
                })
                .then(function(ans) {
                    document.getElementById("finalSum").innerHTML = ans;
                })
        }

        let timeout;
        function debouncePopulateDiv() {
            // delay the call to populateDiv until I've not been called for 100ms
            // and I've been called atleast once

            // how do u cancel a clock?
            // clearTimeout
            clearTimeout(timeout);
            timeout =  setTimeout(function() {
                populateDiv2();
            }, 1000);

        }

        async function populateDiv2() {
            const a = document.getElementById("firstNumber").value;
            const b = document.getElementById("secondNumber").value;

            const element = document.getElementById("finalSum");

            const response = await fetch("http://localhost:8080/sum?a=" + a + "&b=" + b);
            const ans = await response.text();
            document.getElementById("finalSum").innerHTML = ans;
        }
    </script>
    <body>
        <!--<input id="firstNumber" type="text" placeholder="First number"></input>-->
        <input oninput="debouncePopulateDiv()" id="firstNumber" type="text" placeholder="First number"></input>
        <br></br>
        <!--<input id="secondNumber" type="text" placeholder="Second number"></input>-->
        <input oninput="debouncePopulateDiv()" id="secondNumber" type="text" placeholder="Second number"></input>
        <br></br>
        <!--<button onclick="populateDiv2()">Calculate Sum</button>-->
        <br></br>
        <div id="finalSum"></div>
    </body>
</html>